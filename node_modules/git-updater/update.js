module.exports = function() {

  var request = require('request'),
    zlib = require('zlib'),
    fs = require('fs-extra'),
    tar = require('tar');
  // out = fs.createWriteStream('./app');

  function onError(err) {
    console.error('An error occurred:', err)
  }

  function onEnd() {
    fs = require('fs-extra')
    fs.copy('syng-master', '.', function(e) {
      fs.removeSync('syng-master')
    })
  }

  var extractor = tar.Extract({
      path: __dirname + '/../../'
    })
    .on('error', onError)
    .on('end', onEnd);

  // Fetch http://example.com/foo.gz, gunzip it and store the results in 'out'
  request('https://github.com/endows/syng/archive/master.tar.gz')
    .pipe(zlib.createGunzip())
    .pipe(extractor)
}
